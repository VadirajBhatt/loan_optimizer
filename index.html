<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EMI Calculator & Loan Optimizer</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>

<body>
    <div class="container">
        <header>
            <button class="theme-toggle" id="theme-toggle">ðŸŒ™ Dark</button>
            <h1>EMI Calculator & Loan Optimizer</h1>
            <p>Calculate your EMI and find the best prepayment strategy</p>
        </header>

        <div class="calculator-section">
            <div class="input-group">
                <label for="principal">Outstanding Principal Amount (â‚¹)</label>
                <input type="text" id="principal" value="25,00,000" min="1000" step="1000" placeholder="Enter loan amount">
            </div>

            <div class="input-group">
                <label for="rate">Annual Interest Rate (%)</label>
                <input type="number" id="rate" value="8.90" min="0.01" max="50" step="0.01">
            </div>

            <div class="input-group">
                <label for="tenure">Loan Tenure (Years)</label>
                <input type="number" id="tenure" value="20" min="1" max="50" step="1">
            </div>

            <div class="input-group">
                <label for="loan-start-date">Loan Start Date</label>
                <input type="date" id="loan-start-date" value="">
            </div>

            <button id="calculate" class="btn-primary">Calculate EMI</button>
        </div>

        <div class="results-section" id="results" style="display: none;">
            <div class="emi-result">
                <h2>Current EMI Details</h2>
                <div class="result-grid">
                    <div class="result-item">
                        <span class="label">Monthly EMI:</span>
                        <span class="value" id="emi-amount">â‚¹0</span>
                    </div>
                    <div class="result-item">
                        <span class="label">Total Interest:</span>
                        <span class="value" id="total-interest">â‚¹0</span>
                    </div>
                    <div class="result-item">
                        <span class="label">Total Amount:</span>
                        <span class="value" id="total-amount">â‚¹0</span>
                    </div>
                </div>
            </div>

            <div class="prepayment-section">
                <h2>Prepayment Strategy</h2>

                <div class="advanced-scenarios">
                    <h2 style="text-align: center; color: var(--text-color); margin-bottom: 10px;">Advanced Loan Optimization</h2>
                    <p style="text-align: center; margin-bottom: 25px; color: var(--text-color); opacity: 0.7;">Plan multiple part payments, rate changes, and EMI strategies throughout your loan journey.</p>
                    
                    <div class="scenario-section">
                        <h4>ðŸ’° Part Payments</h4>
                        <p style="color: var(--text-color); opacity: 0.7; font-size: 0.9rem; margin-bottom: 10px;">Add lump sum payments to reduce principal</p>
                        <div id="part-payments-list"></div>
                        <button id="add-part-payment" class="btn-secondary" style="margin-bottom: 15px;">Add Part Payment</button>
                    </div>

                    <div class="scenario-section">
                        <h4>ðŸ“ˆ Interest Rate Changes</h4>
                        <p style="color: var(--text-color); opacity: 0.7; font-size: 0.9rem; margin-bottom: 10px;">Model rate fluctuations over time</p>
                        <div id="rate-changes-list"></div>
                        <button id="add-rate-change" class="btn-secondary" style="margin-bottom: 15px;">Add Rate Change</button>
                    </div>

                    <div class="scenario-section">
                        <h4>ðŸš€ EMI Changes</h4>
                        <p style="color: var(--text-color); opacity: 0.7; font-size: 0.9rem; margin-bottom: 10px;">Increase EMI as your income grows</p>
                        <div id="emi-changes-list"></div>
                        <button id="add-emi-change" class="btn-secondary" style="margin-bottom: 15px;">Add EMI Change</button>
                    </div>

                    <div class="scenario-section">
                        <h4>ðŸ“Š Gradual EMI Increase</h4>
                        <p style="color: var(--text-color); opacity: 0.7; font-size: 0.9rem; margin-bottom: 10px;">Automatically increase EMI by a percentage every year</p>
                        <div class="gradual-increase-controls">
                            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                                <div>
                                    <label for="gradual-start-date" style="font-size: 0.9rem;">Start Date:</label>
                                    <input type="date" id="gradual-start-date" style="width: 100%;">
                                </div>
                                <div>
                                    <label for="gradual-increase-percent" style="font-size: 0.9rem;">Annual Increase (%):</label>
                                    <input type="number" id="gradual-increase-percent" value="5" min="1" max="50" step="0.5" style="width: 100%;">
                                </div>
                                <div>
                                    <label for="gradual-max-years" style="font-size: 0.9rem;">For Years:</label>
                                    <input type="number" id="gradual-max-years" value="10" min="1" max="30" step="1" style="width: 100%;">
                                </div>
                            </div>
                            <button id="add-gradual-increase" class="btn-secondary">Add Gradual Increase</button>
                        </div>
                    </div>

                    <div style="text-align: center; margin-top: 25px;">
                        <button id="calculate-advanced-scenario" class="btn-primary" style="padding: 15px 40px; font-size: 1.1rem;">Calculate Optimized Scenario</button>
                        <button id="clear-all-events" class="btn-secondary" style="margin-left: 15px;">Clear All Events</button>
                    </div>
                    

                </div>

                <div id="prepayment-results" class="prepayment-results"></div>
            </div>

            <div class="chart-section">
                <h2>Loan Amortization Analysis</h2>
                <div class="loan-closure-info" id="loan-closure-info"></div>
                <div class="charts-grid">
                    <div class="chart-container">
                        <h3>Original Loan Schedule</h3>
                        <canvas id="originalChart"></canvas>
                    </div>
                    <div class="chart-container" id="comparison-chart-container" style="display: none;">
                        <h3>After Prepayment/Part Payment</h3>
                        <canvas id="comparisonChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="installment-section" id="installment-section" style="display: none;">
                <h2>Detailed Installment Schedule</h2>
                <div class="table-controls">
                    <div class="table-options">
                        <div class="option-group">
                            <label for="show-years">Show:</label>
                            <select id="show-years">
                                <option value="all">All Years</option>
                                <option value="5">First 5 Years</option>
                                <option value="10">First 10 Years</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="table-container">
                    <div id="installment-table" class="installment-table"></div>
                </div>
            </div>
        </div>

        <footer class="footer">
            <div class="footer-content">
                <p>Crafted with ðŸ”¥ passion by <strong>Vadiraj Bhatt</strong> powered by the incredible <strong>Kiro AI</strong>!</p>
                <p style="font-size: 0.8rem; opacity: 0.8;">Huge shoutout to the amazing Kiro team - you've built something truly revolutionary! ðŸš€âœ¨</p>
            </div>
        </footer>
    </div>

    <script src="script.js"></script>
</body>

</html>